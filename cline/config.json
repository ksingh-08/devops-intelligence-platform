{
  "name": "DevOps Intelligence Platform - Cline Configuration",
  "description": "Cline CLI configuration for autonomous code generation in DevOps workflows",
  "version": "1.0.0",
  
  "model": {
    "provider": "anthropic",
    "name": "claude-3-sonnet-20240229",
    "maxTokens": 4096,
    "temperature": 0.1,
    "topP": 0.9
  },
  
  "apiKeys": {
    "anthropic": "${CLINE_API_KEY}",
    "openai": "${OPENAI_API_KEY}",
    "together": "${TOGETHER_API_KEY}"
  },
  
  "workspace": {
    "rootPath": "/tmp/cline-workspace",
    "allowedPaths": [
      "/tmp/cline-workspace",
      "/app/dashboard",
      "/app/kestra",
      "/app/tests"
    ],
    "excludedPaths": [
      "node_modules",
      ".git",
      ".env",
      "*.log"
    ]
  },
  
  "codeGeneration": {
    "autoApprove": true,
    "maxFilesPerSession": 10,
    "maxLinesPerFile": 500,
    "backupOriginals": true,
    "validateSyntax": true,
    "runTests": false,
    "createTests": true
  },
  
  "templates": {
    "bugFix": {
      "systemPrompt": "You are an expert DevOps engineer specializing in production issue resolution. Generate precise, minimal fixes that address the root cause without introducing new issues. Always include error handling and logging.",
      "contextFiles": [
        "error_logs.txt",
        "stack_trace.txt", 
        "system_metrics.json"
      ],
      "outputFormat": "patch",
      "includeTests": true
    },
    
    "performanceOptimization": {
      "systemPrompt": "You are a performance optimization expert. Analyze the provided metrics and generate code changes that improve performance while maintaining functionality. Focus on bottlenecks and resource usage.",
      "contextFiles": [
        "performance_metrics.json",
        "profiling_data.txt",
        "resource_usage.json"
      ],
      "outputFormat": "full_file",
      "includeTests": true
    },
    
    "securityFix": {
      "systemPrompt": "You are a security expert. Generate secure code fixes that address vulnerabilities without breaking existing functionality. Follow security best practices and include proper input validation.",
      "contextFiles": [
        "security_scan.json",
        "vulnerability_report.txt"
      ],
      "outputFormat": "patch",
      "includeTests": true,
      "requireReview": true
    },
    
    "infrastructureCode": {
      "systemPrompt": "You are an infrastructure-as-code expert. Generate Terraform, Kubernetes, or Docker configurations that solve the described infrastructure issues. Ensure scalability and maintainability.",
      "contextFiles": [
        "infrastructure_state.json",
        "resource_requirements.yaml"
      ],
      "outputFormat": "full_file",
      "includeTests": false
    }
  },
  
  "integrations": {
    "git": {
      "enabled": true,
      "autoCommit": true,
      "commitMessageTemplate": "ðŸ¤– Autonomous fix: {issue_description}\n\nGenerated by Cline CLI\nConfidence: {confidence_score}\nIssue ID: {issue_id}",
      "branchPrefix": "autonomous-fix/",
      "createPR": true,
      "prTemplate": {
        "title": "ðŸ¤– Autonomous Fix: {issue_description}",
        "body": "## Autonomous Fix Generated by DevOps Intelligence Platform\n\n**Issue Analysis:**\n{issue_analysis}\n\n**Generated Changes:**\n{changes_summary}\n\n**Confidence Score:** {confidence_score}\n\n**Files Modified:**\n{modified_files}\n\n**Testing:**\n{test_results}\n\n---\n*Auto-generated by Cline CLI via Kestra workflow*\n*Timestamp: {timestamp}*"
      }
    },
    
    "testing": {
      "enabled": true,
      "frameworks": ["jest", "pytest", "go test"],
      "runAfterGeneration": false,
      "generateTests": true,
      "testTemplate": {
        "javascript": "test/templates/jest.template.js",
        "python": "test/templates/pytest.template.py",
        "go": "test/templates/go.template.go"
      }
    },
    
    "linting": {
      "enabled": true,
      "tools": ["eslint", "pylint", "golangci-lint"],
      "autoFix": true,
      "failOnErrors": false
    },
    
    "monitoring": {
      "enabled": true,
      "logLevel": "info",
      "metricsEndpoint": "https://devops-intelligence.vercel.app/api/cline-metrics",
      "trackGeneration": true,
      "trackSuccess": true,
      "trackErrors": true
    }
  },
  
  "safety": {
    "maxExecutionTime": 300,
    "requireConfirmation": false,
    "dangerousOperations": [
      "rm -rf",
      "DROP TABLE",
      "DELETE FROM",
      "sudo",
      "chmod 777"
    ],
    "allowedCommands": [
      "npm",
      "yarn",
      "pip",
      "go",
      "git",
      "docker",
      "kubectl",
      "terraform"
    ],
    "restrictedFiles": [
      ".env",
      "*.key",
      "*.pem",
      "secrets.json"
    ]
  },
  
  "output": {
    "format": "json",
    "includeMetadata": true,
    "includeDiff": true,
    "includeTests": true,
    "saveToFile": true,
    "outputPath": "/tmp/cline-output",
    "timestampFiles": true
  },
  
  "contextWindow": {
    "maxTokens": 32000,
    "reserveTokens": 4000,
    "prioritizeRecent": true,
    "includeFileTree": true,
    "maxFiles": 20
  },
  
  "prompts": {
    "systemPrompt": "You are Cline, an autonomous coding agent integrated into a DevOps Intelligence Platform. Your role is to generate production-ready code fixes based on incident analysis from monitoring systems. You have access to error logs, metrics, and AI-generated issue summaries. Always:\n\n1. Analyze the provided context thoroughly\n2. Generate minimal, targeted fixes\n3. Include proper error handling and logging\n4. Write or update relevant tests\n5. Follow the existing code style and patterns\n6. Consider performance and security implications\n7. Provide clear explanations for your changes\n\nYou are part of an autonomous system that can deploy fixes to production, so accuracy and safety are paramount.",
    
    "userPromptTemplate": "## Production Issue Analysis\n\n**Issue ID:** {issue_id}\n**Severity:** {severity}\n**Confidence Score:** {confidence_score}\n**Source:** {source}\n\n**Issue Description:**\n{issue_description}\n\n**Error Details:**\n{error_details}\n\n**System Context:**\n{system_context}\n\n**AI Recommendation:**\n{ai_recommendation}\n\n**Additional Context Files:**\n{context_files}\n\n---\n\nPlease analyze this production issue and generate the appropriate code fix. Focus on the root cause and ensure the fix is production-ready.",
    
    "followUpPrompts": {
      "needMoreContext": "I need more context to generate an accurate fix. Can you provide:\n1. Stack traces or error logs\n2. Recent code changes\n3. System configuration\n4. Performance metrics",
      
      "clarifyRequirements": "To ensure I generate the correct fix, please clarify:\n1. Expected behavior vs actual behavior\n2. Affected user workflows\n3. Business impact\n4. Rollback requirements",
      
      "validateFix": "I've generated a potential fix. Before proceeding:\n1. Does this address the root cause?\n2. Are there any edge cases I should consider?\n3. Should I include additional monitoring/logging?\n4. Are there dependencies I should be aware of?"
    }
  },
  
  "workflows": {
    "bugFix": [
      "analyze_error_context",
      "identify_root_cause", 
      "generate_fix_code",
      "create_tests",
      "validate_syntax",
      "create_commit",
      "generate_pr"
    ],
    
    "performanceOptimization": [
      "analyze_metrics",
      "identify_bottlenecks",
      "generate_optimizations",
      "create_benchmarks",
      "validate_improvements",
      "create_commit",
      "generate_pr"
    ],
    
    "securityFix": [
      "analyze_vulnerability",
      "assess_impact",
      "generate_secure_fix",
      "create_security_tests",
      "validate_fix",
      "require_manual_review",
      "create_commit"
    ]
  },
  
  "metrics": {
    "track": [
      "generation_time",
      "success_rate",
      "code_quality_score",
      "test_coverage",
      "deployment_success"
    ],
    "thresholds": {
      "max_generation_time": 120,
      "min_success_rate": 0.85,
      "min_code_quality": 0.8,
      "min_test_coverage": 0.7
    }
  },
  
  "experimental": {
    "enableLearning": true,
    "saveSuccessfulPatterns": true,
    "adaptToCodebase": true,
    "improveFromFeedback": true
  }
}
